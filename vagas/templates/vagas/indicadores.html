{% extends 'base_site.html' %} {% load static %} 
{% block title %}Indicadores{% endblock %} 
{% block css %} {{block.super}} {% endblock%} 
{% block main_conteudo %}

<div class="col">


    <div class="main-card mb-3 card">
        <div id="graf_top_cargos_ofertados" style="width: 100%; height: 450px;"></div>
    </div> 

    <div class="main-card mb-3 card">
        <div id="graf_escolaridades" style="width: 100%; height: 450px;"></div>
    </div> 

    <div class="main-card mb-3 card">
        <div id="graf_candidato_por_mes" style="width: 100%; height: 450px;"></div>
    </div> 

    <div class="main-card mb-3 card">
        <div id="graf_vagas_por_empresa" style="width: 100%; height: 450px;"></div>
    </div> 

</div>


<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Cargo', 'Quantidade'],
            {% for cargo_ofertado in top_cargos_ofertados %}
                    ["{{ cargo_ofertado.nome}}",     {{ cargo_ofertado.total }}],
            {% endfor %}
        ]);

        var options = {
          title: '{{top_x}} cargos com mais vagas',
          pieHole: 0.4,
        };

        var chart = new google.visualization.PieChart(document.getElementById('graf_top_cargos_ofertados'));
        chart.draw(data, options);

        // -------------------------- //

        var data = google.visualization.arrayToDataTable([
        ['Cargo', 'Quantidade'],
          {% for escolaridade in escolaridades %}
                  ["{{ escolaridade.nome}}",     {{ escolaridade.total }}],
          {% endfor %}
        ]);

        var options = {
            title: 'Candidatos por escolaridade',
            pieHole: 0.4,
        };

        var chart = new google.visualization.PieChart(document.getElementById('graf_escolaridades'));
        chart.draw(data, options);


        // -------------------------- //

        var data = google.visualization.arrayToDataTable([
        ['Cargo', 'Quantidade'],
          {% for candidato_por_mes in candidatos_por_mes %}
                  ["{{ candidato_por_mes.nome}}",     {{ candidato_por_mes.total }}],
          {% endfor %}
        ]);

        var options = {
            title: 'Candidatos por mÃªs',
        };

        var chart = new google.visualization.ColumnChart(document.getElementById('graf_candidato_por_mes'));
        chart.draw(data, options);

        // -------------------------- //

        var data = google.visualization.arrayToDataTable([
        ['Empresa', 'Quantidade'],
          {% for vaga_por_empresa in vagas_por_empresa %}
                  ["{{ vaga_por_empresa.nome}}",     {{ vaga_por_empresa.total }}],
          {% endfor %}
        ]);

        var options = {
            title: 'Vagas por empresa',
            pieHole: 0.4,
        };

        var chart = new google.visualization.PieChart(document.getElementById('graf_vagas_por_empresa'));
        chart.draw(data, options);
    }


    // -------------------------- //

      google.charts.load("current", {packages:["corechart"]});
      google.charts.setOnLoadCallback(drawChart);


    
    </script>
{% endblock %}